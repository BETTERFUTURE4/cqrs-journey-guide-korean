<div align="center">

#### [목차 바로가기](https://github.com/dhslrl321/cqrs-journey-guide-korean/blob/master/Table%20of%20Contents.md)

</div>

---

# 테스트에 미치는 영향

앞선 과정들이 팀에서 다루었던 첫번쨰 바운디드 컨텍스트이기 때문에, 주요 관심사 중 하나는 바로 TDD 이다.

이벤트 소싱 없이 CQRS 패턴을 구현할 때 TDD 를 수행하는 방법에 대한 두 개발자 간의 대화에서 인사이트를 얻을 수 있다.

## 두 개발자의 대화

#### Developer 1

이벤트 소싱을 사용한다면, 도메인 객체를 만들 때 TDD 를 사용하기 쉬울거야.

이벤트 소싱을 사용한다면, 도메인 객체를 만들 때 TDD 접근 방식을 사용하기 쉬울 것입니다. 테스트에 대한 입력은 명령(Haps당 UI에서 유래한 명령)이며, 도메인 객체가 예상 이벤트를 실행하도록 테스트할 수 있습니다. 그러나 이벤트 소싱을 사용하지 않는 경우 이벤트가 없습니다: 도메인 객체의 동작은 ORM 계층을 통해 데이터 저장소의 변경 사항을 유지하는 것입니다.

#### Developer 2

그래서 어쨌든 이벤트를 올리는 건 어때? 이벤트 소싱을 사용하지 않는다고 해서 도메인 객체가 이벤트를 발생시킬 수 없다는 의미는 아닙니다. 그런 다음 명령에 응답하여 올바른 이벤트 발사를 확인하기 위해 일반적인 방식으로 테스트를 설계할 수 있습니다.

#### Developer 1

그것은 단지 그들이 필요한 것보다 더 복잡하게 만드는 것이 아닌가요? CQRS를 사용하는 동기 중 하나는 일을 단순화하는 것입니다! 이제 ORM 레이어를 사용하여 상태를 유지해야 하는 도메인 객체가 있으며 단위 테스트를 실행할 수 있도록 정렬당 있는 것에 대해 보고하는 이벤트를 발생해야 합니다.

#### Developer 2

무슨 말인지 알겠어

#### Developer 1

아마도 우리는 우리가 테스트를 어떻게 하고 있는지에 집착하고 있을 것이다. 도메인 객체의 예상 동작에 따라 테스트에 서명 해제하는 대신, 명령을 처리한 후 도메인 객체의 상태를 테스트하는 것에 대해 생각해야 합니다.

#### Developer 2

그것은 쉬울 것이다; 결국, 도메인 객체는 ORM이 저장소에 올바른 정보를 유지할 수 있도록 우리가 확인하고 싶은 모든 데이터를 속성에 저장할 것이다.

#### Developer 1

그래서 우리는 이 시나리오에서 다른 스타일의 테스트에 대해 생각할 필요가 있다.

---
