<div align="center">

#### [목차 바로가기](https://github.com/dhslrl321/cqrs-journey-guide-korean/blob/master/Table%20of%20Contents.md)

</div>

---

# 용어 정리

Saga 라는 용어는 일반적으로 CQRS 관련 주제의 토론에서 바운디드 컨텍스트와 애그리거크 간의 메시지를 조정하고 라우팅하는 코드를 참조하는데 사용된다.

그러나 우리는 Process Manager 라는 용어를 사용할 것인데 여기는 두가지 이유가 있다.

1. CQRS 와 별개로 saga 라는 잘 알려진 기존 솔루션이 존재한다.
2. Process Manager 라는 용어는 이러한 유형의 작업을 수행하는 역할에 더 알맞은 이름이라 판단했다.

분산 시스템과 관련하여 saga 라는 용어는 원래 Hector Garcia-Molina and Kenneth Salem 의 논문인 "Sagas" 에서 정의되었다.

이 논문에서 장기적으로 운영되는 비즈니스 프로세스를 관리하기 위해 분산 트랜잭션을 사용하는 대신 saga 라는 이름의 메커니즘을 제안한다.

논문에서 비즈니스 프로세스가 종종 여러 단계로 구성되어 있으며, 각각은 트랜잭션을 포함하여, 이러한 개별 트랜잭션을 분산 트랜잭션으로 그룹화 함으로써 전반적인 consistency 를 이룰 수 있다는 것을 인식한다.

그러나 장기적인 관점의 비즈니스 프로세스에서 분산 트랜잭션을 사용하면 분산된 하나의 커다란 트랜잭션동안 lock 을 유지함으로 시스템의 동시성과 성능에 영향을 미칠 수 있다.

> 사가 개념은 비즈니스 프로세스의 각 단계에서 트랜잭션이 정의된 보상 트랜잭션을 갖도록 함으로써 분산 트랜잭션의 필요성을 제거합니다. 이런 식으로, 비즈니스 프로세스가 오류 조건에 접하고 계속할 수 없다면, 이미 완료된 단계에 대한 보상 트랜잭션을 실행할 수 있습니다. 비즈니스 프로세스에서 완료된 작업을 취소하고 시스템의 consistency 를 유지합니다.

Process Manager 라는 용어를 사용하기로 했지만, Saga 는 여전히 일부 바운디드 컨텍스트에서 CQRS 패턴을 구현하는 시스템에서 사용될 수 있다.

일반적으로 Process Manager 가 바운디드 컨텍스트 내에서 애그리거트 간에 메시지를 라우팅하는, 여러 바운디드 컨텍스트에 걸쳐 실행되는 프로세스를 관리하는 것을 볼 수 있다.

---
