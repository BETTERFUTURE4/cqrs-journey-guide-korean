<div align="center">

#### [목차 바로가기](https://github.com/dhslrl321/cqrs-journey-korean-ver/blob/master/Table%20of%20Contents.mdwn)

</div>

---

# Context Map 과 부패 방지 레이어 (anti-corruption layer)

## Context Map

수십개의 바운디드 컨텍스트와 수백가지의 다른 통합 이벤트 타입을 가진 대규모 시스템은 이해하기 어려울 수 있다.

바운디드 컨텍스트가 어떤 Integration Event 를 게시하고 바운디드 컨텍스트가 어떤 Integration Event 를 publish 하거나 subscribe 하는지에 대한 문서 레코드 (documentation record) 이다.

## 부패 방지 레이어, anti-corruption layer

바운디드 컨텍스트는 서로 독립적으로 업데이트될 수 있다.

이러한 업데이트는 바운디드 컨텍스트가 게시하는 이벤트를 변경할 수 있다.

이러한 변경 사항에는 새 이벤트를 도입하거나, 이벤트 사용을 중단하거나, 이벤트의 이름을 도입하거나, 이벤트 사용을 중단하거나 이름을 바꾸거나 페이로드에 정보를 추가하거나 제거하여 이벤트 definition 을 변경하는 것이 포함될 수 있다.

바운디드 컨텍스트는 다른 바운디드 컨텍스트에 대한 변화에 독립적이어야 한다.

이 문제에 대한 해결책은 바운디드 컨텍스트의 부패 방지 계층 (anti-corruption layer) 를 도입하는 것이다.

부패 방지 레이어는 들어오는 이벤트가 어떤 의미를 가지는지에 대해 확인하는 책임이 있다.

예를 들어, 페이로드에 이벤트 타입에 대한 데이터가 정확한지를 확인하는 것이 있을 수 있다.

또한 부패 방지 레이어를 사용하여 들어오는 이벤트를 변환할 수 있다. 이 변환에는 다음과 같은 작업이 필요하다.

- 게시 바운디드 컨텍스트가 이벤트 유형을 수신하는 바운디드 컨텍스트가 인식할 수 있도록 이벤트 타입에 따른 매핑을 지원한다.
- 게시 바운디드 컨텍스트가 수신하는 바운디느 컨텍스트에 다른 버전을 사용할 때 다른 버전의 이벤트로 변환한다.

---
