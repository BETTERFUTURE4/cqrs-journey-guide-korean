<div align="center">

#### [목차 바로가기](https://github.com/dhslrl321/cqrs-journey-korean-ver/blob/master/Table%20of%20Contents.mdwn)

</div>

---

# Commands, Events 그리고 Messages 의 등장

DDD 는 모델을 사용하게 하고 유비쿼터스 언어를 통해서 비즈니스와 개발 사이의 간극을 줄이도록 해주어 도메인에 대한 common 한 지식을 쌓게 하여 분석하고 설계하는 과정이다.

필요에 따라서 DDD 접근법은 단지 비즈니스 도메인의 데이터가 아니라 행동을 분석하는 것을 더 지향하며, 이는 동작하는 소프트웨어를 모델링하고 구현하는 데에 중점을 둔다.

코드에서 도메인 모델을 구현하는 자연스러운 방법은 command 와 event 를 사용하는 것이다.

이것은 특히 UI 를 사용하는 애플리케이션에 더욱 유리하다.

> DDD는 명령과 이벤트를 사용하여 구현된 도메인 모델에 지정된 작업과 동작을 보는 것이 일반적인 유일한 접근 방식은 아니다. 그러나 CQRS 패턴의 많은 옹호자들은 DDD 접근법의 영향을 강하게 받았기 때문에 CQRS 패턴에 대한 논의가 있을 때마다 DDD 용어가 사용되는 것을 보는 것이 일반적이다.

### Command

명령은 필수적이다; 그것들은 시스템이 작업이나 행동을 형성하도록 요청이다. 예를 들어, "컨퍼런스 X를 위한 두 장소를 예약하세요" 또는 "연사 Y를 Z호실에 할당하세요." 명령은 보통 한 명의 수신자에 의해 한 번만 처리됩니다.

### Events

이벤트는 알림이다. 이미 다른 이해 관계자들에게 과거의 사건을 보고한다.

예를 들어, "고객의 신용 카드에 200달러가 청구되었습니다" 또는 "컨퍼런스 X를 위해 10개의 좌석이 예약되었습니다." 와 같다.

하나의 이벤트는 여러 소비자에 의해 여러 번 처리될 수 있다.

#### 명령과 이벤트 모두 객체 간에 데이터를 교환하는 데 사용되는 메시지 유형이다.

DDD 용어로, 이러한 메시지는 비즈니스 행동을 나타내고 시스템이 메시지 뒤에 있는 비즈니스 의도를 포착하는 데 도움을 준다.

CQRS 패턴을 구현할 때, 읽기 작업과 쓰기 작업에 대해 별도의 데이터 저장소를 사용한다.

각 데이터 저장소는 지원하는 사용 사례에 최적화되어 있다.

<img width="879" alt="image" src="https://user-images.githubusercontent.com/48385288/187082278-c0f03223-3e75-45f0-8c94-ab39cb4ed663.png">

위의 그림은 CQRS 패턴을 구현할 때 명령과 이벤트를 사용하는 방법을 보여준다.

Event 는 command side (처리 명령의 결과)의 변경 사항을 query side 로 동기화하는 메커니즘의 기초를 제공한다.

command side 가 애플리케이션의 상태가 변경될 때마다 이벤트를 발생시키면, query side 는 해당 이벤트에 응답하고 쿼리와 뷰에서 사용되는 데이터를 업데이트해야 한다.

#### 우리는 커맨드와 이벤트를 핸들링 할 수 있는 infrastructure 가 필요하다. 그리고 이에 대해서는 다음 챕터에서 자세히 알아볼 것이다.

> 이벤트가 write side 와 read side 를 동기화하는 유일한 방법만은 아니다.

---
